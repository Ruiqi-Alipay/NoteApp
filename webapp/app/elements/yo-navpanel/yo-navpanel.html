<link rel="import" href="../../../components/polymer/polymer.html">
<link rel="import" href="../../../components/core-header-panel/core-header-panel.html">
<link rel="import" href="../../../components/core-toolbar/core-toolbar.html">
<link rel="import" href="../../../components/core-icon/core-icon.html">
<link rel="import" href="../../../components/paper-item/paper-item.html">
<link rel="import" href="../../../components/paper-shadow/paper-shadow.html">

<polymer-element name="yo-navpanel" attributes="user">
	<template>
		<link rel="stylesheet" href="yo-navpanel.css">

		<core-header-panel fit fixed>
		    <core-toolbar id="drawerTitle" class="tall" mode="standard" layout horizontal center>
	    		<div class="avatar" style="background-image: url({{user.header}})"></div>
	    		<div layout vertical>
	    			<div>{{user.name}}</div>
	    			<div class="subText">{{user.description}}</div>
	    		</div>
		    </core-toolbar>
		    <div layout vertical>
		        <paper-item on-click="{{onNavLikesClicked}}">
		        	<core-icon icon="thumb-up"></core-icon>
		        	<div class="navbarItem" flex>我赞过的</div>
		        	{{user.likeCount > 0 ? user.likeCount : ''}}
		        </paper-item>
		        <paper-item on-click="{{onNavLabledClicked}}">
		        	<core-icon icon="loyalty"></core-icon>
		        	<div class="navbarItem" flex>我标记过的</div>
		        	{{user.labledCount > 0 ? user.labledCount : ''}}
		        </paper-item>
		        <paper-item on-click="{{onNavDraftClicked}}">
		        	<core-icon icon="drafts"></core-icon>
		        	<div class="navbarItem" flex>草稿</div>
		        	{{user.draftCount > 0 ? user.draftCount : ''}}
		        </paper-item>
		   		<p class="navbarItem">加入的群组：</p>
		   		<template repeat="{{group in user.groups}}">
			      <paper-item on-tap="{{selectGroup}}">
			        <div class="navbarItem">{{group.name}}</div>
			      </paper-item>
		   		</template>
		    </div>
	    </core-header-panel>

	</template>
	<script>
	(function() {
		Polymer({
			ready: function () {
				this.navSelection;
			},
			selectGroup: function (event, detail, sender) {
				this.selectedGroup = event.target.templateInstance.model.group;
				this.fire('select-group', this.selectedGroup);
			},
			onNavLikesClicked: function (event, detail, sender) {
				this.fire('nav-likesclicked');
			},
			onNavLabledClicked: function (evnet, detail, sender) {
				this.fire('nav-labledclicked');
			},
			onNavDraftClicked: function (event, detail, sender) {
				this.fire('nav-driftclicked');
			}
		});
	})();
	</script>
</polymer-element>